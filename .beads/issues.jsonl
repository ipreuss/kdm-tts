{"id":"kdm-0e0","title":"Standardize module export pattern (return Module)","description":"Migrate ~48 modules from explicit export tables (return {...}) to direct return (return Module). This eliminates forgotten-export bugs where dynamic field assignments aren't visible to other modules. Priority: Showdown (HIGH - has cross-module state), then Monster, Survivor, Player, Campaign. See ARCHITECTURE.md 'Module Export Pattern' section.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-07T23:15:12.459783+01:00","updated_at":"2025-12-10T11:15:21.870688+01:00"}
{"id":"kdm-32e","title":"Black Knight + Squires campaign implementation","description":"Epic: Black Knight nemesis including Squires campaign variant. Needs breakdown into smaller tasks covering: monster AI, hit locations, resources, gear, campaign-specific rules.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T21:21:05.858246+01:00","updated_at":"2025-12-10T11:15:23.815226+01:00"}
{"id":"kdm-4gv","title":"Scout pillar from Gambler's Chest","description":"","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-10T11:23:38.582047+01:00","updated_at":"2025-12-10T11:24:27.621815+01:00","closed_at":"2025-12-10T11:24:27.621815+01:00"}
{"id":"kdm-5zu","title":"Resource rewards for special monster levels","description":"Add resource rewards for special/variant monster levels that don't follow the standard L1/L2/L3 pattern.\n\n**Special levels without resources (need investigation):**\n\n**White Lion:**\n- Prologue (tutorial, may not have rewards)\n- The Young Lion\n- Radiant Lion\n- Beast of Sorrow\n- Great Golden Cat\n\n**Phoenix:**\n- Golden Eyed King of 1000 Years\n\n**Dragon King:**\n- Death of the Dragon King\n\n**Dung Beetle Knight:**\n- The Old Master\n\n**Sunstalker:**\n- The Great Devourer\n\n**Spidicules:**\n- (none identified)\n\n**Flower Knight:**\n- (none identified)\n\n**Investigation needed:** Research whether these special encounters have resource rewards. Some may be story events without rewards, others may have unique reward structures.\n\n**Parent:** kdm-w1k.3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T23:10:29.907755+01:00","updated_at":"2025-12-09T23:10:40.153517+01:00","dependencies":[{"issue_id":"kdm-5zu","depends_on_id":"kdm-w1k.3","type":"blocks","created_at":"2025-12-09T23:10:45.895198+01:00","created_by":"daemon"}]}
{"id":"kdm-7nq","title":"White Gigalion expansion support","description":"Epic: Full support for White Gigalion expansion. Needs breakdown into smaller tasks covering: monster AI, hit locations, resources, gear, and any special rules.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T21:21:02.827237+01:00","updated_at":"2025-12-06T21:21:29.86659+01:00"}
{"id":"kdm-836","title":"Document Pattern Gear feature","description":"Create docs/features/pattern-gear.md documenting the Pattern Gear feature. Implementation is complete (13 acceptance tests passing) but feature lacks documentation. Covers: deck creation, shuffle behavior, export/import for storage and survivor grids.\n\nAfter documentation is complete, delete docs/BACKLOG.md (all open items transferred to beads, all done items will be documented).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:20:59.896203+01:00","updated_at":"2025-12-06T21:31:25.909686+01:00","closed_at":"2025-12-06T21:31:25.909686+01:00"}
{"id":"kdm-8uy","title":"Add White Sunlion Armor to template","description":"Add White Sunlion Armor gear cards to TTS template. This is a promo expansion (Ezra Limited Release) for People of the Sun campaigns. User has the physical cards. Low priority since it's only usable in People of the Sun. Includes: White Sunlion Mask (stats already in Core.ttslua). Research needed for full armor set pieces.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T10:13:43.943177+01:00","updated_at":"2025-12-07T10:13:52.087863+01:00"}
{"id":"kdm-96o","title":"Showdown terrain not found for expansion monsters","description":"During showdown setup, several expansion monsters report missing terrain:\n- Spidicules: 'Silk Nest', 'Egg Sacs'\n- Sunstalker: '2 Salt Sculptures'\n- Dung Beetle Knight: 'Resin Dung Ball'\n- Flower Knight: 'Flower Patches'\n\nThese terrains are defined in expansion data but cannot be found during Showdown.Setup(). This doesn't block the showdown or tests, but the terrain tiles don't appear on the board.","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-10T03:58:16.613293+01:00","updated_at":"2025-12-10T11:15:18.081508+01:00"}
{"id":"kdm-aep","title":"Arc Survivor pillar from Gambler's Chest","description":"","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-10T11:23:42.794316+01:00","updated_at":"2025-12-10T11:24:27.626082+01:00","closed_at":"2025-12-10T11:24:27.626082+01:00"}
{"id":"kdm-blp","title":"Arc Survivor pillar from Gambler's Chest","description":"Implement the Arc Survivor gameplay pillar from Gambler's Chest expansion. Arc Survivors have progression arcs with branching paths.","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-10T11:24:45.961868+01:00","updated_at":"2025-12-10T11:24:45.961868+01:00"}
{"id":"kdm-cb7","title":"Add resource rewards for special White Lion variants","description":"Special White Lion variants (The Young Lion, Radiant Lion, Beast of Sorrow) should also have resource rewards defined. Currently only the standard Level 1/2/3 variants have rewards data. This is follow-up work after kdm-w1k.1 is complete.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T21:10:21.632356+01:00","updated_at":"2025-12-07T21:10:21.632356+01:00","dependencies":[{"issue_id":"kdm-cb7","depends_on_id":"kdm-w1k.1","type":"blocks","created_at":"2025-12-07T21:10:26.350943+01:00","created_by":"daemon"}]}
{"id":"kdm-ee9","title":"Wanderer pillar from Gambler's Chest","description":"","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-10T11:23:40.646526+01:00","updated_at":"2025-12-10T11:24:27.623846+01:00","closed_at":"2025-12-10T11:24:27.623846+01:00"}
{"id":"kdm-fgd","title":"Document TTS coordinate system and positioning","description":"TTS coordinate system is unintuitive and positioning UI/objects is difficult.\n\n## Approach\nCreate visual documentation using annotated screenshots:\n1. **Location overlay screenshot**: Mark key board positions (showdown board, settlement board, rulebook, resource spawn areas) with colored rectangles and coordinate labels\n2. **Grid overlay screenshot**: Show a colored grid with coordinate scale to understand distances\n\n## Deliverables\n1. Annotated screenshots in docs/ folder\n2. Document coordinate system in ARCHITECTURE.md:\n   - Origin location, axis directions, scale\n   - Common reference points with coordinates\n   - How 3D UI coordinates relate to world coordinates\n3. Optional: Console command to show coordinates in real-time (e.g., \u003eshowpos)\n\n## Value\nSaves time on future UI/object positioning. Current pain point: ResourceRewards button positioning (kdm-w1k.1).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T13:55:03.990858+01:00","updated_at":"2025-12-08T14:40:55.769122+01:00","closed_at":"2025-12-08T14:40:55.769122+01:00"}
{"id":"kdm-ju4","title":"Scout pillar from Gambler's Chest","description":"Implement the Scout gameplay pillar from Gambler's Chest expansion. Scouts explore the world and discover new locations.","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-10T11:24:41.650119+01:00","updated_at":"2025-12-10T11:24:41.650119+01:00"}
{"id":"kdm-mir","title":"TTS tests quiet mode to reduce console output","description":"Add a quiet mode option for TTS console tests that reduces verbose output. Currently tests log every step (setup, checks, found objects, cleanup) which creates a lot of noise. A quiet mode would:\n- Only show test name and PASSED/FAILED result\n- Show full output only for failed tests\n- Could be toggled via \u003etestall quiet or a config flag\n\nThis would make it easier to scan test results and spot failures.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-10T04:00:02.582698+01:00","updated_at":"2025-12-10T11:15:29.724799+01:00"}
{"id":"kdm-o1z","title":"Encounter pillar from Gambler's Chest","description":"","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-10T11:23:36.506592+01:00","updated_at":"2025-12-10T11:24:27.614966+01:00","closed_at":"2025-12-10T11:24:27.614966+01:00"}
{"id":"kdm-pld","title":"Add paired weapon support to integrity tests","description":"The template_archive_integrity_test.lua checks that items in expansion code exist in the template. Currently paired weapons (Bone Hatchet, Tempered Axe, Aya's) fail because code has base name but template has [left]/[right] variants. Add logic to handle paired weapons: if an item has 'paired = true' in weaponStats, check for either the base name OR '[left]'/[right]' variants in template.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T10:31:06.422172+01:00","updated_at":"2025-12-07T11:00:48.327305+01:00","closed_at":"2025-12-07T11:00:48.327305+01:00"}
{"id":"kdm-q3s","title":"Showdown dialog doesn't show levels beyond 2 for White Lion","description":"When opening the showdown dialog for White Lion, only levels up to Level 2 are shown. Level 3 and other variants (Beast of Sorrow, etc.) are not displayed in the selection.\n\n## Steps to Reproduce\n1. Open showdown dialog\n2. Select White Lion\n3. Observe available levels\n\n## Expected\nAll White Lion levels should be visible: Prologue, The Young Lion, Level 1, Level 2, Level 3, Radiant Lion, Beast of Sorrow\n\n## Actual\nOnly levels up to Level 2 are shown","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-07T21:11:33.818351+01:00","updated_at":"2025-12-08T18:52:06.885804+01:00","closed_at":"2025-12-08T18:52:06.885804+01:00"}
{"id":"kdm-rbl","title":"Fix missing gear/armor/weapon items in data","description":"Fix missing gear/armor/weapon items in template or expansion data.\n\n## Armor Items\n| Item | Expansion | Issue |\n|------|-----------|-------|\n| Vagabond Armor | Core | Not in template |\n| White Sunlion Mask | Core | Not in template |\n| God Mask (CE) | Community Edition | Non-CE variant 'God Mask' exists |\n| Phoenix Mask (CE) | Community Edition | Non-CE variant 'Phoenix Mask' exists |\n| White Lion Mask (CE) | Community Edition | Non-CE variant 'White Lion Mask' exists |\n| Antelope Mask (CE) | Community Edition | Non-CE variant 'Antelope Mask' exists |\n| Man Mask (CE) | Community Edition | Non-CE variant 'Man Mask' exists |\n| Flower Knight Costume | Flower Knight | Not in template |\n\n## Weapon Items\n| Item | Expansion | Issue |\n|------|-----------|-------|\n| Aya's | Core | Incomplete name - should be 'Aya's Spear' or 'Aya's Sword' |\n| Bone Hatchet | Core | Paired weapon - template has [left]/[right] variants |\n| Tempered Axe | Core | Paired weapon - template has [left]/[right] variants |\n| Thunder Maul | Core | Only CE variant exists - template has 'Thunder Maul (CE)' |\n\n## Notes\n- Paired weapons: The game tracks left/right hand variants separately. Code may need to handle [left]/[right] suffixes.\n- CE variants: Community Edition items have (CE) suffix. Non-CE variants should be used if CE expansion is disabled.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-06T21:21:01.8445+01:00","updated_at":"2025-12-07T19:34:36.586786+01:00","closed_at":"2025-12-07T19:34:36.586786+01:00"}
{"id":"kdm-rbl.1","title":"Fix missing/incorrect item names in expansion data","description":"Fix items that are missing from template or have wrong names in expansion code:\n- Vagabond Armor (Core) — not in template\n- White Sunlion Mask (Core) — not in template\n- Flower Knight Costume (Flower Knight) — not in template\n- Aya's (Core) — incomplete name, should be 'Aya's Spear' or 'Aya's Sword'\n- Bone Hatchet (Core) — paired weapon, code should reference [left]/[right] variants\n- Tempered Axe (Core) — paired weapon, code should reference [left]/[right] variants","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:44:03.14501+01:00","updated_at":"2025-12-07T10:32:26.607557+01:00","closed_at":"2025-12-07T10:32:26.607557+01:00","dependencies":[{"issue_id":"kdm-rbl.1","depends_on_id":"kdm-rbl","type":"parent-child","created_at":"2025-12-06T21:44:03.145757+01:00","created_by":"daemon"}]}
{"id":"kdm-rbl.2","title":"Archive CE expansion and remove CE variant references","description":"Community Edition expansion adds complexity without benefit. Archive/disable it:\n- Move CE expansion to archive folder\n- Remove CE variant items from active data (God Mask (CE), Phoenix Mask (CE), White Lion Mask (CE), Antelope Mask (CE), Man Mask (CE), Thunder Maul (CE))\n- Ensure non-CE originals work correctly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:44:04.100183+01:00","updated_at":"2025-12-06T21:51:54.153714+01:00","closed_at":"2025-12-06T21:51:54.153714+01:00","dependencies":[{"issue_id":"kdm-rbl.2","depends_on_id":"kdm-rbl","type":"parent-child","created_at":"2025-12-06T21:44:04.100998+01:00","created_by":"daemon"}]}
{"id":"kdm-rbl.3","title":"Allow pairing weapons with different names","description":"Allow Aya's Spear and Aya's Sword to be paired despite having different names.\n\n## User Story\nAs a player, when I equip Aya's Spear and Aya's Sword together, I want them to be recognized as a paired weapon set so that I get the pairing bonuses.\n\n## Context\n- Currently only weapons with identical names can pair\n- Aya's weapons are the only case needing cross-name pairing\n- Template needs 'Aya's Spear' and 'Aya's Sword' added (don't exist yet)\n- Code currently has incomplete name 'Aya's'\n\n## Acceptance Criteria\n- [ ] Aya's Spear and Aya's Sword can be paired\n- [ ] Existing same-name pairing still works (Bone Hatchet, Tempered Axe)\n- [ ] Template contains Aya's Spear and Aya's Sword","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-07T09:46:49.934811+01:00","updated_at":"2025-12-07T19:34:34.968847+01:00","closed_at":"2025-12-07T19:34:34.968847+01:00"}
{"id":"kdm-rhc","title":"Refactor ResourceRewardsTests DRY violations","description":"Extract shared validation logic from DataIntegrity tests (9 functions with identical loops) and replace magic coordinates with Location API. See HANDOVER_REVIEWER_ARCHITECT_W1K3_DESIGN_COMPLIANCE.md for details.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-10T04:09:55.326385+01:00","updated_at":"2025-12-10T11:15:19.938015+01:00"}
{"id":"kdm-s8x","title":"Nukealope quarry/nemesis implementation","description":"Epic: Implementation of Nukealope quarry/nemesis. Needs breakdown into smaller tasks covering: monster AI, hit locations, resources, gear, and any special rules.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T21:21:04.827279+01:00","updated_at":"2025-12-10T11:15:25.749581+01:00"}
{"id":"kdm-tdo","title":"Encounter pillar from Gambler's Chest","description":"Implement the Encounter gameplay pillar from Gambler's Chest expansion. Encounters are triggered events during settlement phase.","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-10T11:24:39.494843+01:00","updated_at":"2025-12-10T11:24:39.494843+01:00"}
{"id":"kdm-tyu","title":"Killenium Butcher nemesis implementation","description":"Epic: Implementation of Killenium Butcher nemesis. Needs breakdown into smaller tasks covering: monster AI, hit locations, resources, gear, and any special rules.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T21:21:03.821759+01:00","updated_at":"2025-12-10T11:15:27.729662+01:00"}
{"id":"kdm-ubf","title":"Wanderer pillar from Gambler's Chest","description":"Implement the Wanderer gameplay pillar from Gambler's Chest expansion. Wanderers are special survivors with unique mechanics.","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-10T11:24:43.747331+01:00","updated_at":"2025-12-10T11:24:43.747331+01:00"}
{"id":"kdm-w1k","title":"Showdown resource rewards button","description":"Add a button to spawn resource rewards after winning a showdown.\n\n## User Story\n\nAs a player, after winning a showdown, I want to press a button that automatically draws my resource rewards so that I don't have to manually search through resource decks.\n\n## Current Pain Point\n\nAfter winning a showdown, players must:\n1. Look up which resources they earned (basic + monster-specific)\n2. Manually search through the basic resource deck\n3. Manually search through the monster resource deck\n4. Draw the correct number of random cards from each\n\n## Requirements\n\n### Button Location\n- Far right of the Rules Navigation Board (row 2, same as Back/Prev/Next buttons)\n\n### Button Availability\n- Available from showdown start until cleanup phase\n- Hidden if monster has no resource rewards\n\n### Behavior\nWhen pressed:\n1. Determine active showdown (monster type + level)\n2. Look up resource rewards for that monster/level (from rulebook data)\n3. Draw random cards from the EXISTING decks on showdown board:\n   - Basic resource deck (number depends on monster/level)\n   - Monster-specific resource deck (number depends on monster/level)\n4. Spawn drawn cards to the left of the settlement board\n\n### Design Decision: Use Existing Decks\nResources MUST be drawn from the already-spawned decks on the showdown board, NOT from fresh decks from the archive. Reason: During the showdown, events may allow players to take resources early (e.g., trap cards). Those resources are no longer available as post-showdown rewards. Drawing from existing decks ensures we only give what's actually left.\n\n### Multiple Press Handling\n- First press: spawn resources immediately\n- Subsequent presses: show confirmation dialog warning that resources were already spawned\n\n### Data Requirements\n- Reward data per monster per level (from rulebook):\n  - Number of basic resources to draw\n  - Number of monster-specific resources to draw\n- Monster type + level determined by active showdown\n\n## Acceptance Criteria\n\n- [ ] Button appears on far right of Rules Navigation Board when showdown starts\n- [ ] Button styled consistently with other Rules Navigation buttons (DARK_BROWN background, LIGHT_BROWN text)\n- [ ] Button hidden if monster has no resource rewards\n- [ ] Button spawns correct number of basic resources for current monster/level\n- [ ] Button spawns correct number of monster resources for current monster/level\n- [ ] **Resources drawn from EXISTING decks on showdown board** (not archive) - run \u003etestrewardsexisting\n- [ ] Resources spawn to designated area (left of settlement board)\n- [ ] Second press shows confirmation dialog before spawning again\n- [ ] Button hidden when showdown ends\n- [ ] Works for White Lion (at minimum for initial implementation)\n\n## TTS Test Commands\n\n- `\u003etestrewardsbutton` - Verify button appears on showdown start\n- `\u003etestrewardshidden` - Verify button hidden for monsters without resources\n- `\u003etestrewardsspawn` - Verify resource data integrity\n- `\u003etestrewardsexisting` - Verify draws from existing decks (not archive)","notes":"## Current State (2025-12-08)\n\n### What Works:\n- ✅ Button appears on far right of Rules Navigation Board (row 2)\n- ✅ Button styled consistently with other Rules buttons (DARK_BROWN/LIGHT_BROWN)\n- ✅ Button shows on showdown start, hides on showdown end\n- ✅ Button hidden for monsters without resources (e.g., Prologue)\n- ✅ Draws from EXISTING decks on showdown board (not archive)\n- ✅ Confirmation dialog on second press\n- ✅ Test command: \u003etestrewardsexisting verifies existing deck behavior\n\n### Known Issue:\n- ❌ Resources spawn ON the showdown board instead of LEFT of settlement board\n- LocationData[\"Resource Rewards\"] is set to x=-10, y=2, z=0 which should be left of settlement board\n- But cards still appear on showdown board - need to investigate why\n\n### Files Modified:\n- ResourceRewards.ttslua - Main module\n- LocationData.ttslua - Spawn location definition\n- TTSTests/ResourceRewardsTests.ttslua - TTS integration tests\n- ARCHITECTURE.md - Documentation\n\n### Next Steps:\n1. Debug why cards spawn at wrong location (possibly Container:Take behavior?)\n2. May need to use different spawn mechanism or adjust coordinates further","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T21:21:00.866144+01:00","updated_at":"2025-12-08T18:53:49.510947+01:00","closed_at":"2025-12-08T18:53:49.510947+01:00"}
{"id":"kdm-w1k.1","title":"White Lion resource rewards (proof of concept)","description":"Implement resource rewards button for White Lion only. Basic resources (4) and monster resources (4/6/8 by level). Validates core mechanism before expanding to other monsters.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T19:58:13.113418+01:00","updated_at":"2025-12-08T16:37:43.164452+01:00","closed_at":"2025-12-08T16:37:43.164452+01:00","dependencies":[{"issue_id":"kdm-w1k.1","depends_on_id":"kdm-w1k","type":"parent-child","created_at":"2025-12-07T19:58:13.114595+01:00","created_by":"daemon"},{"issue_id":"kdm-w1k.1","depends_on_id":"kdm-fgd","type":"blocks","created_at":"2025-12-08T14:04:57.684883+01:00","created_by":"daemon"}]}
{"id":"kdm-w1k.2","title":"Strange resource rewards (named cards)","description":"Add support for spawning named strange resources (e.g., Elder Cat Teeth for White Lion Level 3). Requires different spawning logic than random deck draws.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T19:58:32.749243+01:00","updated_at":"2025-12-08T23:25:08.264896+01:00","closed_at":"2025-12-08T23:25:08.264896+01:00","dependencies":[{"issue_id":"kdm-w1k.2","depends_on_id":"kdm-w1k","type":"parent-child","created_at":"2025-12-07T19:58:32.750489+01:00","created_by":"daemon"},{"issue_id":"kdm-w1k.2","depends_on_id":"kdm-w1k.1","type":"blocks","created_at":"2025-12-07T19:58:51.632088+01:00","created_by":"daemon"}]}
{"id":"kdm-w1k.3","title":"Expand resource rewards to all monsters","description":"Add resource reward data for all quarry monsters once proof of concept is validated. Research and add reward tables for each monster/level.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T19:58:42.145223+01:00","updated_at":"2025-12-10T04:20:45.250923+01:00","closed_at":"2025-12-10T04:20:45.250923+01:00","dependencies":[{"issue_id":"kdm-w1k.3","depends_on_id":"kdm-w1k","type":"parent-child","created_at":"2025-12-07T19:58:42.147451+01:00","created_by":"daemon"},{"issue_id":"kdm-w1k.3","depends_on_id":"kdm-w1k.1","type":"blocks","created_at":"2025-12-07T19:58:51.792209+01:00","created_by":"daemon"}]}
{"id":"kdm-w1k.4","title":"Refactor Rules button creation to shared utility","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T10:48:06.287178+01:00","updated_at":"2025-12-09T01:15:25.001533+01:00","closed_at":"2025-12-09T01:15:25.001533+01:00","dependencies":[{"issue_id":"kdm-w1k.4","depends_on_id":"kdm-w1k","type":"parent-child","created_at":"2025-12-08T10:48:06.292085+01:00","created_by":"daemon"}]}
