-- Test Error Capture for TTS Console Tests
--
-- Captures log:Errorf() calls during test execution to detect
-- unexpected errors that should cause test failure.

local Log = require("Kdm/Core/Log")

---------------------------------------------------------------------------------------------------

local TestErrorCapture = {}

local capturedErrors = {}

---------------------------------------------------------------------------------------------------

function TestErrorCapture.Start()
    capturedErrors = {}
    Log.SetErrorListener(function(module, msg)
        table.insert(capturedErrors, {
            module = module,
            message = msg
        })
    end)
end

function TestErrorCapture.Stop()
    Log.ClearErrorListener()
    return capturedErrors
end

---------------------------------------------------------------------------------------------------

return TestErrorCapture
